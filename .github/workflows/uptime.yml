name: Uptime check

on:
  schedule:
    - cron: "30 4 * * *"   # daily at 04:30 UTC
  workflow_dispatch:        # allow manual run

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Check health
        run: |
          curl -fsS https://darshitkumar-ab-metrics.hf.space/ > /dev/null

      - name: Check metrics
        run: |
          curl -fsS https://darshitkumar-ab-metrics.hf.space/metrics | jq . || {
            echo "metrics endpoint returned non-JSON or empty"; exit 1;
          }
